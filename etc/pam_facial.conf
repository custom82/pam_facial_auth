###############################################
# PAM Facial Authentication - Configuration
###############################################

#################################################
# STORAGE DIRECTORIES
#################################################

# Base directory where user images and recognition models are stored.
# Example structure:
#   basedir/
#       images/<user>/*.jpg
#       models/<user>.xml
basedir=/var/lib/pam_facial_auth

# Image format for captured face crops:
#   jpg | png
image_format=jpg



#################################################
# CAMERA SETTINGS
#################################################

# Primary video device for face capture
device=/dev/video0

# If enabled, automatically tries /dev/video0..2 if the main device fails
fallback_device=yes

# Frame resolution
width=640
height=480

# Number of frames captured during training and testing
frames=10

# Delay between frames in milliseconds
sleep_ms=150

# Enable verbose debugging output to stderr
debug=no

# GUI disabled (reserved for future GUI integration)
nogui=yes



#################################################
# FACE RECOGNIZER (IDENTITY MATCHING)
#################################################
# This setting determines the *type* of face recognition engine used.
#
# Allowed values:
#
#   sface_fp32       → SFace ONNX model (float32, highest accuracy)
#   sface_int8       → SFace ONNX INT8 model (faster, slightly less accurate)
#   lbph             → Classical LBPH algorithm
#   eigen            → Classical EigenFaces algorithm
#   fisher           → Classical FisherFaces algorithm
#
# SFace is recommended for modern systems with any kind of DNN support.
#################################################

recognizer_profile=sface_fp32

# SFace cosine similarity threshold (higher = stricter)
sface_threshold=0.65



#################################################
# RECOGNIZER MODEL FILES
#################################################
# These values correspond directly to the recognizer profiles.
# The system will load the correct model depending on recognizer_profile.
#################################################

# SFace FP32 model (.onnx)
recognize_sface_model_fp32=/usr/share/opencv4/dnn/models/face_recognition_sface_2021dec.onnx

# SFace INT8 model (.onnx)
recognize_sface_model_int8=/usr/share/opencv4/dnn/models/face_recognition_sface_2021dec_int8.onnx



#################################################
# FACE DETECTOR (FACE LOCATION)
#################################################
# Before recognition, a detector must locate the face.
# detector_profile selects which algorithm is used.
#
# Allowed values:
#
#   auto             → choose the best available:
#                         1) YuNet FP32
#                         2) YuNet INT8
#                         3) Haar detector
#
#   haar             → Haar Cascade (traditional CPU-only)
#   yunet_fp32       → YuNet ONNX model FP32
#   yunet_int8       → YuNet ONNX model INT8 (fastest)
#################################################

detector_profile=auto



#################################################
# DETECTOR MODEL FILES
#################################################
# Used by the detector according to the detector_profile value.
#################################################

# Haar detector model (XML)
detect_haar_model=/usr/share/opencv4/haarcascades/haarcascade_frontalface_default.xml

# YuNet FP32 model (ONNX)
detect_yunet_model_fp32=/usr/share/opencv4/dnn/models/face_detect_yunet_2023mar.onnx

# YuNet INT8 model (ONNX)
detect_yunet_model_int8=/usr/share/opencv4/dnn/models/face_detect_yunet_2023mar_int8.onnx



#################################################
# DNN BACKEND AND TARGET
#################################################
# These settings control how ONNX models (SFace and YuNet)
# are executed by OpenCV's DNN module.
#
# Allowed values for dnn_backend:
#   auto          → automatically choose CUDA if available, else CPU
#   cpu           → force CPU backend
#   cuda          → CUDA backend (requires OpenCV built with CUDA)
#   cuda_fp16     → CUDA backend using FP16 Tensor Cores
#   opencl        → OpenCL backend
#
# Allowed values for dnn_target:
#   auto          → select best available target
#   cpu           → run on CPU
#   cuda          → run on CUDA GPU
#   cuda_fp16     → run on CUDA GPU FP16
#   opencl        → run on OpenCL device
#################################################

dnn_backend=auto
dnn_target=auto



#################################################
# EXTRA OPTIONS (COMPATIBILITY / LEGACY)
#################################################

ignore_failure=no
save_failed_images=no
force_overwrite=no
training_method=auto
