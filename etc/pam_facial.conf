###############################################################
#   PAM Facial Authentication – Configuration File (2025)
###############################################################

###############################################################
# BASEDIR – directory principale della libreria
# Qui dentro vengono create:
#   /etc/pam_facial_auth/images/<user>
#   /etc/pam_facial_auth/models/<user>.xml
###############################################################
basedir=/etc/pam_facial_auth


###############################################################
# CAMERA SETTINGS
###############################################################

# Webcam predefinita
device=/dev/video0

# Usa automaticamente /dev/video1 se /dev/video0 fallisce
fallback_device=true

# Risoluzione cattura (usata sia per capture che test)
width=1280
height=720

# Numero frame da catturare per addestramento
frames=50

# Ritardo tra frame in millisecondi
sleep_ms=50


###############################################################
# FACE DETECTOR
###############################################################

# Detector:
#   auto        → usa YuNet se presente, altrimenti Haar
#   yunet       → forza YuNet FP32
#   yunet_int8  → forza YuNet INT8
#   haar        → forza Haar Cascade
detector_profile=auto

# YuNet FP32
yunet_model=/usr/share/opencv4/dnn/models/face_detection_yunet_2023mar.onnx

# YuNet INT8 (fallback per CPU lente)
yunet_model_int8=/usr/share/opencv4/dnn/models/face_detection_yunet_2023mar_int8.onnx

# Haar Cascade (fallback di emergenza)
haar_cascade_path=/usr/share/opencv4/haarcascades/haarcascade_frontalface_default.xml


###############################################################
# RECOGNIZER
###############################################################

# Tipo modelo:
#   eigen
#   fisher
#   lbph
#   sface          (usa embedding DNN)
#   auto           (legge il tipo dal file XML del modello utente)
recognizer=auto


###############################################################
# SFace (DNN Recognition)
###############################################################

# Modelli SFace FP32 e INT8
sface_model=/usr/share/opencv4/dnn/models/face_recognition_sface_2021dec.onnx
sface_model_int8=/usr/share/opencv4/dnn/models/face_recognition_sface_2021dec_int8.onnx

# Preferisci FP32 quando disponibile
sface_prefer_fp32=true


###############################################################
# THRESHOLDS
###############################################################

# EigenFace
eigen_threshold=350

# FisherFace
fisher_threshold=150

# LBPH
lbph_threshold=80

# SFace (cosine distance)
#   0.20 = molto severo
#   0.40 = raccomandato
#   0.50 = permissivo
sface_threshold=0.40


###############################################################
# LOGGING / DEBUG / EXTRA
###############################################################

# Abilita log dettagliati
debug=false

# Scrivi log dettagliati nel file
log_file=/var/log/pam_facial_auth.log

# Sovrascrivi immagini già presenti durante capture
force_overwrite=false

# Disabilita GUI in facial_test / facial_capture
nogui=true
