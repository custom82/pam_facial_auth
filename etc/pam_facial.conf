######################################################################
#               pam_facial_auth — Configurazione ufficiale
######################################################################

#########################
#  Directory di lavoro  #
#########################

# Dove vengono salvate immagini e modelli utente
basedir=/var/lib/pam_facial_auth

#########################
#    Dispositivo video  #
#########################

# Webcam principale
device=/dev/video0

# Prova /dev/video1, /dev/video2 se device fallisce
fallback_device=true


#########################
#      Parametri base   #
#########################

# Risoluzione cattura immagini
width=1280
height=720

# Numero di frame da catturare per addestramento
frames=300

# Delay tra un frame e l’altro (ms)
sleep_ms=50

# Default output image format
image_format=jpg

# Modalità debug
debug=false


#########################
#    DNN Backend/Target #
#########################
# Possibili valori:
#  dnn_backend:  cpu | cuda | cuda_fp16 | opencl | default
#  dnn_target:   cpu | cuda | cuda_fp16 | opencl

# Defaults (auto)
dnn_backend=cpu
dnn_target=cpu


###########################################
#    Detector dinamico (YuNet / Haar)     #
###########################################

# PROFILO DA USARE: (importante)
#   haar
#   yunet_fp32
#   yunet_int8
#   auto
detector_profile=yunet_fp32

# Modelli disponibili

# Haar Cascade (XML)
detect_haar=/usr/share/opencv4/haarcascades/haarcascade_frontalface_default.xml

# YuNet FP32
detect_yunet_fp32=/usr/share/opencv4/dnn/models/face_detection_yunet_2023mar.onnx

# YuNet INT8
detect_yunet_int8=/usr/share/opencv4/dnn/models/face_detection_yunet_2023mar_int8.onnx


#############################################
#    Recognizer dinamico (SFace / classici) #
#############################################

# Profilo riconoscimento:
#   lbph
#   eigen
#   fisher
#   sface_fp32
#   sface_int8
#   auto
recognizer_profile=sface_fp32

# Metodo training:
#   auto → sface se riconoscimento è sface_*, altrimenti lbph
#   lbph | eigen | fisher | sface
training_method=auto


############## Modelli recognizer dinamici ##############

# SFace modelli
recognize_sface_fp32=/usr/share/opencv4/dnn/models/face_recognition_sface_2021nov.onnx
recognize_sface_int8=/usr/share/opencv4/dnn/models/face_recognition_sface_2021nov_int8.onnx

# Classic LBPH/Eigen/Fisher — niente modelli (XML viene generato)
lbph_threshold=80
eigen_threshold=5000
fisher_threshold=3000
eigen_components=50
fisher_components=10


#############################
#     Opzioni varie         #
#############################

# Se true, sovrascrive un modello esistente
force_overwrite=true

# Ignora il fallimento della cattura (sconsigliato)
ignore_failure=false

# Salva immagini che falliscono detection
save_failed_images=false

# SFace threshold di default
sface_threshold=0.45

# GUI usage in facial_test
nogui=false
