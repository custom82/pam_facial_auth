###############################################
# PAM Facial Authentication - Config File
###############################################

# -------------------------------------------------------------------
# Directory base della libreria:
#  - images/ contiene le immagini catturate per ogni utente
#  - models/ contiene i modelli XML (classici) o XML SFace (embedding)
# -------------------------------------------------------------------
basedir=/etc/pam_facial_auth

# -------------------------------------------------------------------
# Webcam / Video Input
# -------------------------------------------------------------------
device=/dev/video0
fallback_device=yes

width=640
height=480
frames=10
sleep_ms=100

# -------------------------------------------------------------------
# Debug & Logging
# -------------------------------------------------------------------
debug=no
nogui=yes
log_file=/var/log/pam_facial_auth.log

# -------------------------------------------------------------------
# Haar Cascade (fallback per detection se YuNet non disponibile)
# -------------------------------------------------------------------
haar_cascade_path=/usr/share/opencv4/haarcascades/haarcascade_frontalface_default.xml

# -------------------------------------------------------------------
# Face Detector
#   Options:
#       auto    -> usa YuNet se presente, altrimenti Haar
#       yunet   -> forza YuNet
#       haar    -> forza Haar
# -------------------------------------------------------------------
detector_profile=auto

# YuNet models (OpenCV 4.12+)
yunet_model=/usr/share/opencv4/dnn/models/face_detection_yunet_2023mar.onnx
yunet_model_int8=/usr/share/opencv4/dnn/models/face_detection_yunet_2023mar_int8.onnx

# Backend YuNet:
#   cpu        -> usa modello FP32
#   cpu_int8   -> usa modello INT8 (più veloce, meno preciso)
yunet_backend=cpu

# -------------------------------------------------------------------
# Recognizer Profile
#   Opzioni:
#       sface        -> usa modello ONNX SFace FP32
#       sface_int8   -> usa modello ONNX SFace INT8
#       lbph
#       eigen
#       fisher
# -------------------------------------------------------------------
recognizer_profile=sface

# Modelli SFace ONNX (da OpenCV extra)
sface_model=/usr/share/opencv4/dnn/models/face_recognition_sface_2021dec.onnx
sface_model_int8=/usr/share/opencv4/dnn/models/face_recognition_sface_2021dec_int8.onnx

# Soglia SFace (cosine similarity)
# Valori tipici:
#   0.40 = molto permissivo
#   0.50 = bilanciato
#   0.60 = più rigido
sface_threshold=0.50

# -------------------------------------------------------------------
# Recognizer classici (se non usi SFace)
# -------------------------------------------------------------------
training_method=lbph

lbph_threshold=60.0
eigen_threshold=3500.0
fisher_threshold=500.0

eigen_components=0
fisher_components=0

# -------------------------------------------------------------------
# Misc
# -------------------------------------------------------------------
force_overwrite=no
ignore_failure=no

# Salva i frame falliti in basedir/failed/
save_failed_images=no
