# pam_facial_auth configuration
#
# Config location (default):
#   /etc/security/pam_facial_auth.conf
#
# SECURITY NOTE:
#   Model directory is FIXED and NOT configurable:
#     /etc/security/pam_facial_auth/<user>.xml
#   This is to avoid dependency on /var at boot.
#
# Captures are still stored under basedir (temporary images):
#   basedir/captures/<user>/f_*.jpg

basedir=/var/lib/pam_facial_auth

# Webcam
device=/dev/video0
width=640
height=480

# Capture/Test
frames=30
sleep_ms=100
image_format=jpg

# Detector: none | cascade | yunet
detector=none
# cascade_path required if detector=cascade
#cascade_path=/usr/share/opencv4/haarcascades/haarcascade_frontalface_default.xml
# detect_yunet required if detector=yunet
#detect_yunet=/etc/security/pam_facial_auth/face_detection_yunet_2023mar.onnx

# Recognizer: auto | lbph | eigen | fisher | sface
method=auto

# SFace ONNX (required if you train/use sface)
#recognize_sface=/etc/security/pam_facial_auth/face_recognition_sface_2021dec.onnx

# Thresholds
# Classic: smaller is better
threshold=60.0
lbph_threshold=60.0
eigen_threshold=5000.0
fisher_threshold=500.0

# SFace: larger is better (cosine similarity)
sface_threshold=0.36

# Behavior / debug
debug=no
verbose=no
nogui=yes

# PAM: if yes, return PAM_IGNORE on failure
ignore_failure=no
