# ============================================================
# PAM FACIAL AUTH - CONFIGURAZIONE MODULARE (Plugin Based)
# ============================================================

# --- Percorsi di Sistema ---
# Directory base per i dati biometrici degli utenti
basedir=/var/lib/pam_facial_auth

# --- Configurazione Hardware ---
device=/dev/video0
fallback_device=yes
width=1280
height=720

# --- Parametri di Acquisizione ---
# Numero di immagini da catturare per il training/test
frames=30
sleep_ms=100
image_format=jpg

# --- Logica di Riconoscimento (Plugins) ---
# Metodi supportati: auto, sface, lbph, eigen, fisher
# 'auto' utilizzerà sface se i modelli ONNX sono presenti
training_method=auto

# --- Configurazione Plugin DNN (SFace/YuNet) ---
# Utilizzato se training_method è 'sface' o 'auto'
dnn_backend=cpu
dnn_target=cpu

# Modelli per il rilevamento e il riconoscimento
# Assicurati che i percorsi siano corretti per il tuo sistema
detect_yunet=/usr/share/opencv4/dnn/models/face_detection_yunet_2023mar.onnx
recognize_sface=/usr/share/opencv4/dnn/models/face_recognition_sface_2021dec.onnx

# Soglia di accettazione per SFace (Cosine Similarity)
# Valore consigliato: 0.36 - 0.50
sface_threshold=0.36

# --- Configurazione Plugin Classici (OpenCV Face) ---
# Utilizzati se training_method è 'lbph', 'eigen' o 'fisher'

# LBPH (Local Binary Patterns Histograms) - Consigliato per affidabilità
lbph_threshold=60.0

# Eigenfaces / Fisherfaces
eigen_threshold=5000.0
fisher_threshold=500.0
eigen_components=80
fisher_components=80

# --- Opzioni di Sicurezza e Debug ---
# Se 'yes', PAM restituirà PAM_IGNORE invece di PAM_AUTH_ERR in caso di fallimento
ignore_failure=no

# Attiva log dettagliati per il debug
debug=no
verbose=no
nogui=yes
